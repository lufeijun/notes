# redis list 数据类型




# 队列



# 配置
  使用 redis 作为队列时，需要注意
    1、队列中的数据一般具有较高的可靠性要求，所以持久化机制最好选用 aof 方式，保证数据不丢失
    2、需要对内存进行监控，防止出现无法对外服务的情况
    3、如果只有一个消费者在消费队列。推荐使用 lindex 读取信息，消费完成之后，使用 lpop 扔掉，保证事务性，
    4、如果有多个消费者在消费队列，消息处理失败之后可以将消息重新写入队列，前提是消息没有有序性要求；



# 实例一

## 问题
  在 sns 中，经常出现 1s 中上万个用户同步发送消息的情况，如果直接使用 mysql 存储的话，会出现 too many connections 的错误。

## 解决方式一
  此时就可以利用 redis 的 list 作为队列，首先将用户消息暂时存储在消息队列中，再用一个 cron 定时程序，不断的从队列中去数据，并存储到 mysql 中，以次来降低 mysql 的并发量









# 需要补充点

  1、redis 持久化方式对比
  2、list 数据类型详细介绍
  3、队列



# redis list 
  用于存储多个有序的字符串，可以充当 栈 和 队列，具有以下特点
    1、列表中的元素是有序的，可以通过索引下标获取某个元素或者某个范围内的元素列表
    2、列表中的元素是可以重复的

组合：
  a、lpush + lpop = stack 栈    先进先出
  b、lpush + rpop = queue 队列  先进后出
  c、lpush + ltrim = capped collection 有限集合
  d、lpush + brpop = message queue 消息队列

